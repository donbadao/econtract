"use strict";(self["webpackChunkecontract_frontend"]=self["webpackChunkecontract_frontend"]||[]).push([[130],{2847:function(t,a,s){s.d(a,{Z:function(){return o}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"col flex-column text-center"},[a("svg",{attrs:{width:"100",height:"100"}},[a("svg",{attrs:{id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 208 230"}},[a("defs",[a("linearGradient",{attrs:{id:"colorNodata",x1:"133.69",y1:"120.61",x2:"73.06",y2:"91.22",gradientTransform:"matrix(1, 0, 0, -1, 0, 231.28)",gradientUnits:"userSpaceOnUse"}},[a("stop",{attrs:{offset:"0","stop-color":"#95abc2"}}),a("stop",{attrs:{offset:"1","stop-color":"#fff"}})],1),a("mask",{attrs:{id:"maskColorNodata",x:"134.5",y:"14.55",width:"17.97",height:"17.21",maskUnits:"userSpaceOnUse"}},[a("g",{attrs:{id:"handFlag"}},[a("path",{attrs:{d:"M137,24a8.1,8.1,0,0,1,8.1-8.1h6.3v6.3a8.1,8.1,0,0,1-8.1,8.1H137Z",fill:"#fff"}})])])],1),a("path",{attrs:{d:"M94.2,85.7l85.9,23.6v82.6l-85.9-37Z",fill:"#8e99a3"}}),a("path",{attrs:{d:"M94.3,85.7,24.1,105.3v86.8l70.1-37.6Z",fill:"#a0aab5"}}),a("path",{attrs:{d:"M139.4,185.9c-19.4-5.7-53.4-5.2-66.2-38.3-11.7-30.4,31.5-59.6,43.6-46.8,8.6,9.1-2.4,22.2-17.7,20.7C82,119.8,71.9,104.5,75.3,88c6.7-32.7,58.3-54.4,60.5-55.9",fill:"none","stroke-width":"3","stroke-dasharray":"6 7",stroke:"url(#colorNodata)"}}),a("path",{attrs:{d:"M141,21.5s-.5-12.3-3.7-15.6a8.4,8.4,0,0,0-11.8,11.8C128.7,21,141,21.5,141,21.5Z",fill:"#ced8e5",opacity:"0.4"}}),a("path",{attrs:{d:"M146.7,26.4s.5,12.3,3.7,15.6a8.4,8.4,0,0,0,11.8-11.8C159.1,26.9,146.7,26.4,146.7,26.4Z",fill:"#ced8e5",opacity:"0.4"}}),a("path",{attrs:{d:"M137,24a8.1,8.1,0,0,1,8.1-8.1h6.3v6.3a8.1,8.1,0,0,1-8.1,8.1H137Z",fill:"#a8b7c5"}}),a("g",{attrs:{mask:"url(#maskColorNodata)"}},[a("rect",{attrs:{x:"140.1",y:"16.7",width:"2.3",height:"16.69",transform:"translate(23.6 107.2) rotate(-45)",fill:"#dde5f2"}}),a("path",{attrs:{d:"M139.1,16.2l1.6-1.6,11.8,11.8L150.9,28Z",fill:"#dde5f2"}})]),a("path",{attrs:{d:"M159.2,12.3l5.5-1.3",fill:"none",stroke:"#8696c5","stroke-width":"0.9"}}),a("path",{attrs:{d:"M156.9,10.1l2.1-5.5",fill:"none",stroke:"#8696c5","stroke-width":"0.9"}}),a("path",{attrs:{d:"M153.7,20.5a6.1,6.1,0,1,0-6.1-6.1A6.1,6.1,0,0,0,153.7,20.5Z",fill:"#8b9aa8"}}),a("path",{attrs:{d:"M24.1,105.5,110,132.8V229L24.1,192Z",fill:"#dae2ec"}}),a("path",{attrs:{d:"M180.5,109.2l-71.7,23.6V229l71.7-37Z",fill:"#c5d0d9"}}),a("path",{attrs:{d:"M180.3,109.1,208,146.2l-73.6,29L109,132.6Z",fill:"#dae2ec"}}),a("path",{attrs:{d:"M24,105.3,0,142.8l84.6,32.4,24.7-42.7Z",fill:"#c5d0d9"}})])]),a("h4",{staticClass:"text-center font-size-20px mb-2 text-no--data text-primary"},[t._v("Chưa có dữ liệu")]),a("div",{staticClass:"text-muted"},[t._v("Hãy thêm dữ liệu hoặc Kiểm tra lại thông tin tra cứu")])])},r=[],l=s(1001),i={},n=(0,l.Z)(i,e,r,!1,null,null,null),o=n.exports},2130:function(t,a,s){s.r(a),s.d(a,{default:function(){return g}});var e=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"revenues"}},[a("h1",{staticClass:"fw-bold title-page"},[t._v("Quản lý doanh thu")]),a("div",{staticClass:"card mb-2"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row gy-4 y-sm-1"},[a("div",{staticClass:"col-sm-6 col-lg-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-start card-widget-1 border-end pb-3 pb-sm-0"},[a("div",[a("h3",{staticClass:"mb-1 block fw-bold text-danger"},[t._v(" "+t._s(t._f("formatamout")(t.totalPTTB))+"đ ")]),a("p",{staticClass:"mb-0"},[t._v("Tiền lương PTTB")])]),t._m(0)])]),a("div",{staticClass:"col-sm-6 col-lg-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-start card-widget-1 border-end pb-3 pb-sm-0"},[a("div",[a("h3",{staticClass:"mb-1 block fw-bold text-danger"},[t._v(" "+t._s(t._f("formatamout")(t.revenue))+"đ ")]),a("p",{staticClass:"mb-0"},[t._v("Doanh thu tính lương")])]),t._m(1)])]),a("div",{staticClass:"col-sm-6 col-lg-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-start card-widget-1 border-end pb-3 pb-sm-0"},[a("div",[a("h3",{staticClass:"mb-1 block fw-bold text-danger"},[t._v(" "+t._s(t._f("formatamout")(t.totalRevenue))+"đ ")]),a("p",{staticClass:"mb-0"},[t._v("Doanh thu tổng")])]),t._m(2)])]),a("div",{staticClass:"col-sm-6 col-lg-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-start card-widget-1 border-end pb-3 pb-sm-0"},[a("div",[a("h3",{staticClass:"mb-1 block fw-bold text-danger"},[t._v(t._s(t.revenues.length))]),a("p",{staticClass:"mb-0"},[t._v("Tổng số hợp đồng")])]),t._m(3)])])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-start card-widget-1 border-end pb-3 pb-sm-0"},[a("div",[a("h3",{staticClass:"mb-1 block fw-bold text-danger"},[t._v(t._s(t._f("formatamout")(t.calBSC))+"đ")]),a("p",{staticClass:"mb-0"},[t._v("Tiền lương BSC")])]),t._m(4)])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-start card-widget-1 border-end pb-3 pb-sm-0"},[a("div",[a("h3",{staticClass:"mb-1 block fw-bold text-danger"},[t._v(t._s(t._f("formatamout")(t.calRevenueSalary))+"đ")]),a("p",{staticClass:"mb-0"},[t._v("Tiền lương doanh thu")])]),t._m(5)])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-start card-widget-1 border-end pb-3 pb-sm-0"},[a("div",[a("h3",{staticClass:"mb-1 block fw-bold text-danger"},[t._v(t._s(t._f("formatamout")(t.calTotalSalary))+"đ")]),a("p",{staticClass:"mb-0"},[t._v("Tiền lương ước tính")])]),t._m(6)])])])])]),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.salary.bsc,expression:"salary.bsc"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.salary.bsc},on:{input:function(a){a.target.composing||t.$set(t.salary,"bsc",a.target.value)}}})])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.salary.p1,expression:"salary.p1"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.salary.p1},on:{input:function(a){a.target.composing||t.$set(t.salary,"p1",a.target.value)}}})])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.salary.revenue_acc,expression:"salary.revenue_acc"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.salary.revenue_acc},on:{input:function(a){a.target.composing||t.$set(t.salary,"revenue_acc",a.target.value)}}})])])]),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"float-start"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentMonth,expression:"currentMonth"}],staticClass:"form-select",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.currentMonth=a.target.multiple?s:s[0]}}},t._l(t.months,(function(s){return a("option",{key:s,domProps:{value:s}},[t._v(" Tháng "+t._s(s)+" ")])})),0)]),a("div",{staticClass:"float-start ms-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentYear,expression:"currentYear"}],staticClass:"form-select",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.currentYear=a.target.multiple?s:s[0]}}},[a("option",{attrs:{value:"2023"}},[t._v("2023")]),a("option",{attrs:{value:"2024"}},[t._v("2024")])])]),a("button",{staticClass:"btn btn-primary-soft ms-2",attrs:{"data-bs-toggle":"collapse","data-bs-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"},on:{click:function(a){return t.getRevenues()}}},[a("i",{staticClass:"fa-solid fa-sack-dollar"}),t._v(" Lương tạm tính ")])])]),a("revenues",{attrs:{revenues:t.revenues}}),0==t.revenues.length?a("NotFound"):t._e()],1)},r=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar me-sm-4"},[a("div",{staticClass:"avatar-initial rounded bg-label-secondary"},[a("i",{staticClass:"fa-sharp fa-solid fa-dollar-sign"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar me-sm-4"},[a("div",{staticClass:"avatar-initial rounded bg-label-secondary"},[a("i",{staticClass:"fa-sharp fa-solid fa-dollar-sign"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar me-sm-4"},[a("div",{staticClass:"avatar-initial rounded bg-label-secondary"},[a("i",{staticClass:"fa-sharp fa-solid fa-dollar-sign"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar me-sm-4"},[a("div",{staticClass:"avatar-initial rounded bg-label-secondary"},[a("i",{staticClass:"fa-sharp fa-solid fa-dollar-sign"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar me-sm-4"},[a("div",{staticClass:"avatar-initial rounded bg-label-secondary"},[a("i",{staticClass:"fa-sharp fa-solid fa-dollar-sign"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar me-sm-4"},[a("div",{staticClass:"avatar-initial rounded bg-label-secondary"},[a("i",{staticClass:"fa-sharp fa-solid fa-dollar-sign"})])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar me-sm-4"},[a("div",{staticClass:"avatar-initial rounded bg-label-secondary"},[a("i",{staticClass:"fa-sharp fa-solid fa-dollar-sign"})])])}],l=function(){var t=this,a=t._self._c;return a("div",[a("table",{staticClass:"table table-hover"},[t._m(0),a("tbody",[a("tr",[a("td"),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchBy.company_name,expression:"searchBy.company_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tìm theo tên công ty"},domProps:{value:t.searchBy.company_name},on:{input:function(a){a.target.composing||t.$set(t.searchBy,"company_name",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchBy.company_taxcode,expression:"searchBy.company_taxcode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tìm theo mã số thuế"},domProps:{value:t.searchBy.company_taxcode},on:{input:function(a){a.target.composing||t.$set(t.searchBy,"company_taxcode",a.target.value)}}})]),a("td"),a("td"),a("td"),a("td"),a("td"),a("td")]),t._l(t.revenuesfiltered,(function(s,e){return a("tr",{key:s.contract_id},[a("td",[t._v(t._s(e+1))]),a("td",[a("router-link",{staticClass:"fw-bold",attrs:{to:{name:"contract-detail",params:{id:s.contract_id}},title:s.company_name}},[t._v(" "+t._s(s.company_name)+" ")]),a("div",[a("i",{staticClass:"text-danger"},[t._v(t._s(s.contract_note))])]),t._l(s.details,(function(s){return a("ul",{key:s.detail_id,staticClass:"list-group"},[a("li",{staticClass:"list-group-item m-1"},[a("div",[a("strong",[t._v("Nội dung: ")]),t._v(t._s(s.detail_content))]),a("div",[a("strong",[t._v("Thành tiền:")]),t._v(" "+t._s(t._f("formatamout")(s.detail_product_price))+" ")])])])}))],2),a("td",[t._v(t._s(s.company_taxcode))]),a("td",[t._v(t._s(t._f("moment")(s.complete_date,"DD/MM/YYYY")))]),a("td",[1==s.contract_type?[t._m(1,!0)]:[t._m(2,!0)]],2),a("td",[1==s.contract_area?[t._m(3,!0)]:[t._m(4,!0)]],2),a("td",[t._v(t._s(s.ratio_value))]),a("td",[t._v(t._s(t._f("formatamout")(t.calculatorRevenues(s)))+"đ")]),a("td",[t._v(t._s(t._f("formatamout")(t.calSalaryPTTB(s)))+"đ")])])}))],2)])])},i=[function(){var t=this,a=t._self._c;return a("thead",{staticClass:"table-dark"},[a("tr",[a("th",{staticClass:"rounded-start",attrs:{width:"10"}},[t._v("#")]),a("th",{attrs:{width:"35%"}},[t._v("Tên công ty")]),a("th",[t._v("Mã số thuế")]),a("th",[t._v("Ngày HT/Xuất HĐ")]),a("th",[t._v("Loại HĐ")]),a("th",[t._v("Khu vực")]),a("th",[t._v("Tỷ lệ")]),a("th",[t._v("Doanh thu")]),a("th",{staticClass:"rounded-end"},[t._v("Tiền PTTB")])])])},function(){var t=this,a=t._self._c;return a("span",{staticClass:"badge bg-warning bg-opacity-10 text-black"},[a("i",{staticClass:"fa-solid fa-circle-small"}),t._v(" Gia hạn")])},function(){var t=this,a=t._self._c;return a("span",{staticClass:"badge bg-success bg-opacity-10 text-success"},[a("i",{staticClass:"fa-solid fa-circle-small"}),t._v(" Mới")])},function(){var t=this,a=t._self._c;return a("span",{staticClass:"badge bg-warning bg-opacity-10 text-black"},[a("i",{staticClass:"fa-solid fa-circle-small"}),t._v(" Huyện")])},function(){var t=this,a=t._self._c;return a("span",{staticClass:"badge bg-success bg-opacity-10 text-success"},[a("i",{staticClass:"fa-solid fa-circle-small"}),t._v(" Thành phố")])}],n=s(1427),o={props:{revenues:Array},data(){return{searchBy:{company_name:"",company_taxcode:""}}},computed:{...(0,n.Se)("revenues",["totalPTTB"]),revenuesfiltered(){let t=this.revenues.filter((t=>-1!==t.company_name.toLowerCase().indexOf(this.searchBy.company_name.toLowerCase())));return t}},methods:{...(0,n.nv)("revenues",["calRevenues"]),calculatorRevenues(t){return this.calSalary(t)},calSalary(t){let a=t.details,s=0;null!==t.ratio_value&&t.ratio_value;return s=a.reduce(((a,s)=>s.product.product_split?a+parseFloat(s.detail_product_price/t.contract_expired_month*s.detail_quantity):a+parseFloat(s.detail_product_price*s.detail_quantity)),0),s},calSalaryPTTB(t){let a=t.details,s=0,e=null!==t.ratio_value?t.ratio_value:.1;return s=a.reduce(((t,a)=>t+parseFloat(a.detail_product_price*a.detail_quantity)*parseFloat(e)),0),s}}},c=o,d=s(1001),u=(0,d.Z)(c,l,i,!1,null,null,null),v=u.exports,m=s(1859),f=s(2847),p={components:{revenues:v,NotFound:f.Z},data(){return{revenues:[],months:[1,2,3,4,5,6,7,8,9,10,11,12],currentMonth:(new Date).getMonth()+1,currentYear:(new Date).getFullYear(),salary:{bsc:2.5,p1:524,revenue_acc:3e7,total_salary:0,ratio:5300}}},watch:{revenues:{handler(t){this.calTotalPTTB(t)},deep:!0}},computed:{...(0,n.Se)("revenues",["totalPTTB","revenue","totalRevenue"]),calBSC(){return parseFloat(this.salary.ratio*this.salary.p1*(this.salary.bsc/3)*1)},calRevenueSalary(){return parseFloat(132e3*this.totalRevenue/1e6)},calTotalSalary(){return parseFloat(this.calRevenueSalary+this.totalPTTB+this.calBSC)}},created(){this.getRevenues()},methods:{...(0,n.nv)("revenues",["calTotalPTTB"]),async getRevenues(){this.$econtract.showLoading(),await m.Z.post("/revenues/search",{month:this.currentMonth,year:this.currentYear}).then((t=>{this.revenues=t.data,this.$econtract.hideLoading()}))}}},_=p,h=(0,d.Z)(_,e,r,!1,null,null,null),g=h.exports}}]);
//# sourceMappingURL=130.3483c659.js.map
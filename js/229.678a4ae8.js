"use strict";(self["webpackChunkecontract_frontend"]=self["webpackChunkecontract_frontend"]||[]).push([[229],{3669:function(t,e,a){a.d(e,{Z:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("b-modal",{ref:"modalDetail",attrs:{id:"modal-add-customer","hide-header-close":"","no-close-on-backdrop":"","no-fade":"",size:"md","ignore-enforce-focus-selector":"span.select2-container",title:"Thêm người liên hệ"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("button",{staticClass:"btn btn-primary-soft",on:{click:t.saveCustomer}},[e("i",{staticClass:"fa-thin fa-floppy-disk"}),t._v(" Lưu ")]),e("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$bvModal.hide("modal-add-customer")}}},[e("i",{staticClass:"fa-thin fa-xmark"}),t._v(" Đóng ")])]},proxy:!0}])},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Tên người liên hệ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Customer.customer_name,expression:"Customer.customer_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên người liên hệ"},domProps:{value:t.Customer.customer_name},on:{input:function(e){e.target.composing||t.$set(t.Customer,"customer_name",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Số điện thoại người liên hệ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Customer.customer_phone,expression:"Customer.customer_phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Số điện thoại người liên hệ"},domProps:{value:t.Customer.customer_phone},on:{input:function(e){e.target.composing||t.$set(t.Customer,"customer_phone",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Email người liên hệ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Customer.customer_email,expression:"Customer.customer_email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email người liên hệ"},domProps:{value:t.Customer.customer_email},on:{input:function(e){e.target.composing||t.$set(t.Customer,"customer_email",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Ngày sinh người liên hệ")]),e("date-picker",{attrs:{config:t.options},model:{value:t.Customer.customer_birthday,callback:function(e){t.$set(t.Customer,"customer_birthday",e)},expression:"Customer.customer_birthday"}})],1)])},n=[],o=a(8915),r=a.n(o),i=a(9773),u=a.n(i),c=a(1859),l={components:{datePicker:r()},data(){return{Customer:{customer_name:"",customer_phone:0,customer_id:0,customer_email:"",customer_birthday:this.$econtract.formatDate(new Date)},options:{format:"DD/MM/YYYY",useCurrent:!1},isUpdate:!1}},methods:{async saveCustomer(){this.isUpdate?await c.Z.put("/customers/update",this.Customer).then((t=>{200==t.status&&(this.$toast.success("Cập nhật người liên hệ thành công"),this.$emit("addCustomerSuccess",t.data),this.$bvModal.hide("modal-add-customer"))})):await c.Z.post("/customers",this.Customer).then((t=>{200==t.status&&(this.$toast.success("Thêm người liên hệ thành công"),this.$emit("addCustomerSuccess",t.data),this.$bvModal.hide("modal-add-customer"))}))},show(t=null,e=!1){e&&(this.Customer=t,this.Customer.customer_birthday=u()(t.customer_birthday).format("DD/MM/YYYY")),this.isUpdate=e,this.$bvModal.show("modal-add-customer")}}},m=l,d=a(1001),h=(0,d.Z)(m,s,n,!1,null,null,null),p=h.exports},438:function(t,e,a){a.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"d-flex pagination justify-content-center mt-2"},[t.pagination.current_page>1?e("li",{staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]):t._e(),t._l(t.pagesNumber,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:a==t.pagination.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item"},[t.pagination.current_page<t.pagination.last_page?e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])]):t._e()])],2)])])},n=[],o=(a(560),{props:{pagination:{type:Object,required:!0},offset:{type:Number,default:4}},computed:{pagesNumber:function(){if(!this.pagination.to)return[];var t=this.pagination.current_page-this.offset;t<1&&(t=1);var e=t+2*this.offset;e>=this.pagination.last_page&&(e=this.pagination.last_page);var a=[];for(t=1;t<=e;t++)a.push(t);return a}},methods:{changePage:function(t){this.pagination.current_page=t}}}),r=o,i=a(1001),u=(0,i.Z)(r,s,n,!1,null,null,null),c=u.exports},5800:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"fw-bold title-page"},[t._v("Danh sách khách hàng")]),e("table",{staticClass:"table table-responsive"},[t._m(0),e("tbody",t._l(t.customers,(function(a,s){return e("tr",{key:a.customer_id},[e("td",[t._v(t._s(s+1))]),e("td",[e("span",{staticClass:"text-primary cursor_hand",on:{click:function(e){return t.show(a)}}},[t._v(t._s(a.customer_name))])]),e("td",[t._v(t._s(a.customer_phone))]),e("td",[t._v(t._s(a.customer_email))]),e("td",[t._v(t._s(t._f("moment")(a.customer_birthday,"DD/MM/YYYY")))]),e("td",[e("button",{staticClass:"btn btn-warning btn-sm",on:{click:function(e){return t.show(a)}}},[e("i",{staticClass:"fa-light fa-pen-to-square"})])])])})),0)]),e("pagination",{attrs:{pagination:t.pagination,offset:4},nativeOn:{click:function(e){return t.fetchAll(t.pagination.current_page)}}}),e("ModalCustomerAdd",{ref:"modalCustomer"})],1)},n=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"table-dark"},[e("th",{staticClass:"rounded-start",attrs:{width:"10"}},[t._v("#")]),e("th",[t._v("Tên khách hàng")]),e("th",[t._v("Số điện thoại")]),e("th",[t._v("Email")]),e("th",[t._v("Ngày sinh")]),e("th",{staticClass:"rounded-end"})])])}],o=a(438),r=a(3669),i=a(1427),u={components:{ModalCustomerAdd:r.Z,pagination:o.Z},computed:{...(0,i.Se)("customers",["customers","pagination"])},created(){this.fetchAll()},methods:{...(0,i.nv)("customers",["getCustomers"]),show(t){let e=!1;null!=t&&(e=!0),this.$refs.modalCustomer.show(t,e)},fetchAll(t){this.$econtract.showLoading(),this.getCustomers({pageSize:20,page:t}).then((()=>{this.$econtract.hideLoading()}))}}},c=u,l=a(1001),m=(0,l.Z)(c,s,n,!1,null,null,null),d=m.exports}}]);
//# sourceMappingURL=229.678a4ae8.js.map
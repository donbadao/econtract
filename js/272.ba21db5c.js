"use strict";(self["webpackChunkecontract_frontend"]=self["webpackChunkecontract_frontend"]||[]).push([[272],{9272:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"delivery"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-10 offset-1"},[e("h1",{staticClass:"title-page fw-bold"},[t._v(t._s(t.title))]),e("div",{staticClass:"card border-0"},[e("div",{staticClass:"card-body p-0"},[e("ul",{staticClass:"list-group"},[t._m(0),e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Hợp đồng")]),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.company_name,expression:"Delivery.company_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Chọn hợp đồng"},domProps:{value:t.Delivery.company_name},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"company_name",e.target.value)}}}),e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"button-addon3"},on:{click:function(e){return t.showContracts()}}},[e("i",{staticClass:"fa-thin fa-magnifying-glass"})])])])]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Mã số thuế")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.company_taxcode,expression:"Delivery.company_taxcode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Mã số thuế"},domProps:{value:t.Delivery.company_taxcode},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"company_taxcode",e.target.value)}}})])]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Ngày biên bản")]),e("date-picker",{attrs:{config:{format:"DD/MM/YYYY",useCurrent:!1}},model:{value:t.Delivery.delivery_date,callback:function(e){t.$set(t.Delivery,"delivery_date",e)},expression:"Delivery.delivery_date"}})],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Ngày bắt đầu")]),e("date-picker",{attrs:{config:t.options},model:{value:t.Delivery.contract_date_start,callback:function(e){t.$set(t.Delivery,"contract_date_start",e)},expression:"Delivery.contract_date_start"}})],1)]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Ngày kết thúc")]),e("date-picker",{attrs:{config:t.options},model:{value:t.Delivery.contract_date_end,callback:function(e){t.$set(t.Delivery,"contract_date_end",e)},expression:"Delivery.contract_date_end"}})],1)])])]),t._m(1),e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Tên thuê bao")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.ten_tb,expression:"Delivery.ten_tb"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên thuê bao"},domProps:{value:t.Delivery.ten_tb},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"ten_tb",e.target.value)}}})])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Số HĐ & Ngày HĐ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.contract_number_content,expression:"Delivery.contract_number_content"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Số HĐ & Ngày HĐ"},domProps:{value:t.Delivery.contract_number_content},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"contract_number_content",e.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Serial Number")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.serial_number,expression:"Delivery.serial_number"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Serial Number",required:""},domProps:{value:t.Delivery.serial_number},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"serial_number",e.target.value)}}})])])])]),e("li",{staticClass:"list-group-item bg-light fw-bold"},[t._v(" Thông tin nhân viên bàn giao ")]),e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Nhân viên bàn giao")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.staff_name,expression:"Delivery.staff_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhân viên bàn giao"},domProps:{value:t.Delivery.staff_name},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"staff_name",e.target.value)}}})])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Chức vụ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.staff_position,expression:"Delivery.staff_position"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhân viên bàn giao"},domProps:{value:t.Delivery.staff_position},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"staff_position",e.target.value)}}})])])])]),e("li",{staticClass:"list-group-item bg-light fw-bold"},[t._v(" Thông tin bên nhận bàn giao ")]),e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Bên nhận bàn giao")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.recipient_name,expression:"Delivery.recipient_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Bên nhận bàn giao"},domProps:{value:t.Delivery.recipient_name},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"recipient_name",e.target.value)}}})])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Chức vụ bên nhận")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.recipient_position,expression:"Delivery.recipient_position"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Chức vụ"},domProps:{value:t.Delivery.recipient_position},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"recipient_position",e.target.value)}}})])])])]),e("li",{staticClass:"list-group-item bg-light fw-bold"},[t._v("Thông tin thay đổi")]),e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Loại")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.delivery_type,expression:"Delivery.delivery_type"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Delivery,"delivery_type",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"0"}},[t._v("BBBG")]),e("option",{attrs:{value:"1"}},[t._v("Thay đổi thông tin")]),e("option",{attrs:{value:"2"}},[t._v("Thay đổi thiết bị")])])])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Tên công cũ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.company_name_old,expression:"Delivery.company_name_old"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên công ty cũ"},domProps:{value:t.Delivery.company_name_old},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"company_name_old",e.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Tên công mới")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Delivery.company_name_new,expression:"Delivery.company_name_new"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tên công ty mới"},domProps:{value:t.Delivery.company_name_new},on:{input:function(e){e.target.composing||t.$set(t.Delivery,"company_name_new",e.target.value)}}})])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-check form-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isEcontract,expression:"isEcontract"}],staticClass:"form-check-input",attrs:{type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"},domProps:{checked:Array.isArray(t.isEcontract)?t._i(t.isEcontract,null)>-1:t.isEcontract},on:{change:function(e){var a=t.isEcontract,i=e.target,s=!!i.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);i.checked?o<0&&(t.isEcontract=a.concat([r])):o>-1&&(t.isEcontract=a.slice(0,o).concat(a.slice(o+1)))}else t.isEcontract=s}}}),e("label",{staticClass:"form-check-label",attrs:{for:"flexSwitchCheckDefault"}},[t._v("Hợp đồng điện tử")])])])])])])]),e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn btn-primary me-2",on:{click:function(e){return t.store()}}},[e("i",{staticClass:"fa-thin fa-floppy-disk"}),t._v(" Lưu ")]),e("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"delivery-index"}}},[e("i",{staticClass:"fa-thin fa-arrow-left"}),t._v(" Quay lại ")])],1)])])]),e("ModalContracts",{ref:"modalcontract",on:{contract:t.getContract}})],1)},s=[function(){var t=this,e=t._self._c;return e("li",{staticClass:"list-group-item bg-light"},[e("strong",[t._v("Thông tin hợp đồng")])])},function(){var t=this,e=t._self._c;return e("li",{staticClass:"list-group-item bg-light"},[e("strong",[t._v("Thông tin thuê bao")])])}],r=(a(560),a(8915)),o=a.n(r),n=function(){var t=this,e=t._self._c;return e("b-modal",{ref:"modal-add-delivery",attrs:{id:"modal-add-delivery","no-close-on-backdrop":"","no-fade":"",size:"lg","hide-footer":"",title:"Danh sách hợp đồng"}},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Nhập mã số thuế hoặc tên doanh nghiệp để tìm kiếm...."},domProps:{value:t.keyword},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),e("button",{staticClass:"btn btn-primary-soft",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.search()}}},[e("i",{staticClass:"fa-solid fa-magnifying-glass"}),t._v(" Tìm kiếm ")])])])]),e("div",{staticClass:"card border-0"},[e("div",{staticClass:"card-body p-0 overflow-auto",staticStyle:{height:"400px"}},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[t._v("#")]),e("th",{attrs:{width:"55%"}},[t._v("Tên công ty")]),e("th",[t._v("Mã số thuế")]),e("th",[t._v("Ngày HĐ")]),e("th",[t._v("Tổng tiền (VAT)")]),e("th",{attrs:{width:"10"}})])]),e("tbody",t._l(t.contracts,(function(a,i){return e("tr",{key:a.contract_id},[e("td",[t._v(t._s(i+1))]),e("td",[e("span",{staticClass:"text-primary"},[t._v(t._s(a.company_name))])]),e("td",[t._v(t._s(a.company_taxcode))]),e("td",[t._v(t._s(t._f("moment")(a.contract_date,"DD/MM/YYYY")))]),e("td",[e("strong",{staticClass:"text-danger"},[t._v(" "+t._s(t._f("formatamout")(a.contract_total)))])]),e("td",[e("button",{staticClass:"btn btn-primary-soft btn-sm",on:{click:function(e){return t.sendItem(a)}}},[e("i",{staticClass:"fa-light fa-circle-arrow-right"})])])])})),0)])])])])},l=[],c={data(){return{keyword:"",contracts:[]}},methods:{search(){this.getContracts(this.searchArray)},show(){this.$bvModal.show("modal-add-delivery"),this.getContracts(this.searchArray)},sendItem(t){this.$emit("contract",t),this.$bvModal.hide("modal-add-delivery")},async getContracts(t){let e=performance.now();this.$econtract.showLoading(),await axios.post("contracts",{name:this.keyword}).then((t=>{200==t.status&&(this.contracts=t.data.data),this.$econtract.hideLoading(),console.log("Time to started "+(performance.now()-e))})).catch((t=>{}))}}},d=c,v=a(1001),m=(0,v.Z)(d,n,l,!1,null,null,null),p=m.exports,u=a(1859),y={components:{datePicker:o(),ModalContracts:p},data(){return{title:"Tạo mới BBBG",Delivery:{company_name:"",delivery_type:0,delivery_id:0,contract_id:0,delivery_date:this.$econtract.formatDate(new Date),staff_name:"Nguyễn Hữu Lễ",staff_position:"Nhân viên",serial_number:"",recipient_name:"",recipient_position:"",company_name_new:"",company_name_old:"",company_taxcode:"",contract_date_start:this.$econtract.formatDate(new Date),contract_date_end:this.$econtract.formatDate(new Date),ten_tb:""},options:{format:"DD/MM/YYYY",useCurrent:!1},isEcontract:!1,contract:{},isUpdate:!1}},watch:{isEcontract:{handler(t){t?(this.Delivery.staff_name="Nguyễn Thị Diễm Mi",this.Delivery.staff_position="PGĐ Phòng KH-TC-DN"):(this.Delivery.staff_name="Nguyễn Hữu Lễ",this.Delivery.staff_position="Nhân viên")}}},created(){this.$route.params.id>0&&(this.isUpdate=!0,this.title="Cập nhật biên bản bàn giao",this.show(this.$route.params.id))},methods:{async store(){this.Delivery.serial_number?this.isUpdate?await u.Z.put("deliverys/update",this.Delivery).then((t=>{200==t.status&&(this.$toast.success("Cập nhật biên bản thành công"),this.$router.push({name:"delivery-index"}))})):await u.Z.post("deliverys",this.Delivery).then((t=>{200==t.status&&(this.$toast.success("Thêm biên bản thành công"),this.$router.push({name:"delivery-index"}))})):this.$toast.warning("Bạn chưa nhập số Serial")},showContracts(){this.$refs.modalcontract.show()},async show(t){await u.Z.get(`deliverys/${t}`).then((t=>{this.Delivery=t.data,this.Delivery.delivery_date=this.$econtract.formatDate(t.data.delivery_date),this.Delivery.contract_date_start=this.$econtract.formatDate(t.data.contract_date_start),this.Delivery.contract_date_end=this.$econtract.formatDate(t.data.contract_date_end)}))},getContract(t){this.Delivery.contract_id=t.contract_id,this.Delivery.company_name=t.company_name,this.Delivery.company_taxcode=t.company_taxcode,this.Delivery.ten_tb=t.company_name,this.Delivery.recipient_name=t.company_owner,this.Delivery.recipient_position=t.company_position,this.Delivery.contract_date_start=this.$econtract.formatDate(t.contract_date_start),this.Delivery.contract_date_end=this.$econtract.formatDate(t.contract_date_end)}}},_=y,h=(0,v.Z)(_,i,s,!1,null,null,null),f=h.exports}}]);
//# sourceMappingURL=272.ba21db5c.js.map
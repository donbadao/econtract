"use strict";(self["webpackChunkecontract_frontend"]=self["webpackChunkecontract_frontend"]||[]).push([[940],{6055:function(t,a,e){e.d(a,{Z:function(){return h}});var r=function(){var t=this,a=t._self._c;return a("b-modal",{attrs:{id:"modal-complete-Contract","hide-header-close":"","no-close-on-backdrop":"",size:"md"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(t._s(t.title)+" ")]},proxy:!0},{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-secondary",on:{click:function(a){return t.$bvModal.hide("modal-complete-Contract")}}},[a("i",{staticClass:"fa-thin fa-xmark"}),t._v(" Đóng ")]),a("button",{staticClass:"btn btn-primary-soft",on:{click:t.saveComplete}},[a("i",{staticClass:"fa-thin fa-floppy-disk"}),t._v(" Lưu ")])]},proxy:!0}])},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tên công ty")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Contract.company_name,expression:"Contract.company_name"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.Contract.company_name},on:{input:function(a){a.target.composing||t.$set(t.Contract,"company_name",a.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Ngày hoàn hiện")]),a("date-picker",{attrs:{config:t.options},model:{value:t.Contract.complete_date,callback:function(a){t.$set(t.Contract,"complete_date",a)},expression:"Contract.complete_date"}})],1),1==t.type?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Trạng thái thanh toán")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.payment_status,expression:"payment_status"}],staticClass:"form-select",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.payment_status=a.target.multiple?e:e[0]}}},[a("option",{attrs:{value:"3"}},[t._v("Đã nộp tiền")]),a("option",{attrs:{value:"4"}},[t._v("Đã nộp tiền và làm thanh toán")])])]):t._e()])},o=[],n=e(9773),s=e.n(n),c=e(8915),l=e.n(c),i=e(1859),d={components:{datePicker:l()},data(){return{options:{format:"DD/MM/YYYY",useCurrent:!1},Contract:[],type:0,title:"Hoàn thiện hợp đồng",payment_status:3}},methods:{show(t=null,a=0){this.title=0==a?"Hoàn thiện hợp đồng":"Thanh toán hợp đồng",this.Contract=t,this.type=a,this.$bvModal.show("modal-complete-Contract")},async saveComplete(){await i.Z.put("/contracts/updatestatus",{type:this.type,payment_status:this.payment_status,contract_id:this.Contract.contract_id,complete_date:s()(this.Contract.complete_date).format("YYYY-MM-DD HH:mm:ss")}).then((t=>{"success"==t.data.message&&(this.$toast.success("Cập nhật dữ liệu thành công"),this.$emit("updateCompleteContract",t.data.data))})),this.$bvModal.hide("modal-complete-Contract")}}},m=d,p=e(1001),u=(0,p.Z)(m,r,o,!1,null,null,null),h=u.exports},2847:function(t,a,e){e.d(a,{Z:function(){return l}});var r=function(){var t=this,a=t._self._c;return a("div",{staticClass:"col flex-column text-center"},[a("svg",{attrs:{width:"100",height:"100"}},[a("svg",{attrs:{id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 208 230"}},[a("defs",[a("linearGradient",{attrs:{id:"colorNodata",x1:"133.69",y1:"120.61",x2:"73.06",y2:"91.22",gradientTransform:"matrix(1, 0, 0, -1, 0, 231.28)",gradientUnits:"userSpaceOnUse"}},[a("stop",{attrs:{offset:"0","stop-color":"#95abc2"}}),a("stop",{attrs:{offset:"1","stop-color":"#fff"}})],1),a("mask",{attrs:{id:"maskColorNodata",x:"134.5",y:"14.55",width:"17.97",height:"17.21",maskUnits:"userSpaceOnUse"}},[a("g",{attrs:{id:"handFlag"}},[a("path",{attrs:{d:"M137,24a8.1,8.1,0,0,1,8.1-8.1h6.3v6.3a8.1,8.1,0,0,1-8.1,8.1H137Z",fill:"#fff"}})])])],1),a("path",{attrs:{d:"M94.2,85.7l85.9,23.6v82.6l-85.9-37Z",fill:"#8e99a3"}}),a("path",{attrs:{d:"M94.3,85.7,24.1,105.3v86.8l70.1-37.6Z",fill:"#a0aab5"}}),a("path",{attrs:{d:"M139.4,185.9c-19.4-5.7-53.4-5.2-66.2-38.3-11.7-30.4,31.5-59.6,43.6-46.8,8.6,9.1-2.4,22.2-17.7,20.7C82,119.8,71.9,104.5,75.3,88c6.7-32.7,58.3-54.4,60.5-55.9",fill:"none","stroke-width":"3","stroke-dasharray":"6 7",stroke:"url(#colorNodata)"}}),a("path",{attrs:{d:"M141,21.5s-.5-12.3-3.7-15.6a8.4,8.4,0,0,0-11.8,11.8C128.7,21,141,21.5,141,21.5Z",fill:"#ced8e5",opacity:"0.4"}}),a("path",{attrs:{d:"M146.7,26.4s.5,12.3,3.7,15.6a8.4,8.4,0,0,0,11.8-11.8C159.1,26.9,146.7,26.4,146.7,26.4Z",fill:"#ced8e5",opacity:"0.4"}}),a("path",{attrs:{d:"M137,24a8.1,8.1,0,0,1,8.1-8.1h6.3v6.3a8.1,8.1,0,0,1-8.1,8.1H137Z",fill:"#a8b7c5"}}),a("g",{attrs:{mask:"url(#maskColorNodata)"}},[a("rect",{attrs:{x:"140.1",y:"16.7",width:"2.3",height:"16.69",transform:"translate(23.6 107.2) rotate(-45)",fill:"#dde5f2"}}),a("path",{attrs:{d:"M139.1,16.2l1.6-1.6,11.8,11.8L150.9,28Z",fill:"#dde5f2"}})]),a("path",{attrs:{d:"M159.2,12.3l5.5-1.3",fill:"none",stroke:"#8696c5","stroke-width":"0.9"}}),a("path",{attrs:{d:"M156.9,10.1l2.1-5.5",fill:"none",stroke:"#8696c5","stroke-width":"0.9"}}),a("path",{attrs:{d:"M153.7,20.5a6.1,6.1,0,1,0-6.1-6.1A6.1,6.1,0,0,0,153.7,20.5Z",fill:"#8b9aa8"}}),a("path",{attrs:{d:"M24.1,105.5,110,132.8V229L24.1,192Z",fill:"#dae2ec"}}),a("path",{attrs:{d:"M180.5,109.2l-71.7,23.6V229l71.7-37Z",fill:"#c5d0d9"}}),a("path",{attrs:{d:"M180.3,109.1,208,146.2l-73.6,29L109,132.6Z",fill:"#dae2ec"}}),a("path",{attrs:{d:"M24,105.3,0,142.8l84.6,32.4,24.7-42.7Z",fill:"#c5d0d9"}})])]),a("h4",{staticClass:"text-center font-size-20px mb-2 text-no--data text-primary"},[t._v("Chưa có dữ liệu")]),a("div",{staticClass:"text-muted"},[t._v("Hãy thêm dữ liệu hoặc Kiểm tra lại thông tin tra cứu")])])},o=[],n=e(1001),s={},c=(0,n.Z)(s,r,o,!1,null,null,null),l=c.exports},940:function(t,a,e){e.r(a),e.d(a,{default:function(){return p}});var r=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"debt-index"}},[a("h1",{staticClass:"fw-bold title-page"},[t._v("Danh sách hợp đồng còn nợ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 mb-2"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h4",{staticClass:"fw-bold"},[t._v("Tổng số nợ")]),a("h5",{staticClass:"text-danger fw-bold"},[t._v(t._s(t._f("formatamout")(t.debtTotal))+"đ")])])])])]),a("table",{staticClass:"table"},[t._m(0),a("tbody",[a("tr",[a("td"),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchArray.company_name,expression:"searchArray.company_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tìm tên công ty"},domProps:{value:t.searchArray.company_name},on:{input:function(a){a.target.composing||t.$set(t.searchArray,"company_name",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchArray.company_taxcode,expression:"searchArray.company_taxcode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Mã số thuế"},domProps:{value:t.searchArray.company_taxcode},on:{input:function(a){a.target.composing||t.$set(t.searchArray,"company_taxcode",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchArray.contract_total,expression:"searchArray.contract_total"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Số tiền tổng"},domProps:{value:t.searchArray.contract_total},on:{input:[function(a){a.target.composing||t.$set(t.searchArray,"contract_total",a.target.value)},t.filterArray]}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchArray.customer_name,expression:"searchArray.customer_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Đầu mối liên hệ"},domProps:{value:t.searchArray.customer_name},on:{input:function(a){a.target.composing||t.$set(t.searchArray,"customer_name",a.target.value)}}})]),a("td"),a("td")]),t._l(t.contractFilltered,(function(e,r){return a("tr",{key:e.contract_id},[a("td",[t._v(" "+t._s(r+1)+" ")]),a("td",[a("router-link",{attrs:{title:e.company_name,to:{name:"contract-detail",params:{id:e.contract_id}}}},[t._v(" "+t._s(e.company_name)+" ")])],1),a("td",[t._v(t._s(e.company_taxcode))]),a("td",[a("strong",{staticClass:"text-danger"},[t._v(t._s(t._f("formatamout")(e.contract_total)))])]),a("td",[t._v(t._s(e.customer_name))]),a("td",[t._v(t._s(t._f("moment")(e.contract_date,"DD/MM/YYYY")))]),a("td",[t._v(t._s(t._f("moment")(e.complete_date,"DD/MM/YYYY")))]),a("td",[a("button",{staticClass:"btn btn-primary-soft btn-sm",attrs:{title:"Thanh toán"},on:{click:function(a){return t.completeContract(e,1)}}},[a("i",{staticClass:"fa-solid fa-circle-dollar"})])])])}))],2)]),0==t.contractFilltered.length?a("not-found"):t._e(),a("completeContract",{ref:"completeContract",on:{updateCompleteContract:t.updateCompleteContract}})],1)},o=[function(){var t=this,a=t._self._c;return a("thead",{staticClass:"table-dark"},[a("tr",[a("th",{staticClass:"rounded-start"},[t._v("#")]),a("th",{attrs:{width:"35%"}},[t._v("Tên công ty")]),a("th",[t._v("Mã số thuế")]),a("th",[t._v("Số tiền (VAT)")]),a("th",[t._v("Đầu mối")]),a("th",[t._v("Ngày HĐ")]),a("th",[t._v("Ngày xuất HĐ/HT")]),a("th",{staticClass:"rounded-end"})])])}],n=e(1859),s=e(2847),c=e(6055),l={components:{NotFound:s.Z,completeContract:c.Z},data(){return{contracts:[],keyword:"",searchArray:{company_name:"",contract_total:"",customer_name:"",company_taxcode:""}}},computed:{debtTotal(){let t=this.contractFilltered.filter((t=>2==t.contract_payment)).reduce(((t,a)=>t+parseFloat(a.contract_total)),0);return t},contractFilltered(){let t=this.contracts.filter((t=>2==t.contract_payment&&-1!==t.company_name.toLowerCase().indexOf(this.searchArray.company_name.toLowerCase())&&-1!==t.contract_total.indexOf(this.searchArray.contract_total)&&-1!==t.customer_name.toLowerCase().indexOf(this.searchArray.customer_name.toLowerCase())));return t}},created(){this.getContracts()},methods:{filterArray(){console.log(this.searchArray.contract_total),this.$emit("update_debt",this.searchArray.contract_total)},contractStatus(t){return this.$econtract.contractStatus(t)},updateCompleteContract(t){let a=this.contracts.filter((a=>a.contract_id==t.contract_id))[0];a.contract_status=t.contract_status,a.contract_payment=t.contract_payment},completeContract(t,a){this.$refs.completeContract.show(t,a)},async getContracts(){this.$econtract.showLoading(),await n.Z.get(`${API_URL}/debt`).then((t=>{this.contracts=t.data,this.$econtract.hideLoading()}))}}},i=l,d=e(1001),m=(0,d.Z)(i,r,o,!1,null,null,null),p=m.exports}}]);
//# sourceMappingURL=940.76f9cb83.js.map
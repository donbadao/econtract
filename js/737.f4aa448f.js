"use strict";(self["webpackChunkecontract_frontend"]=self["webpackChunkecontract_frontend"]||[]).push([[737],{438:function(t,e,a){a.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"d-flex pagination justify-content-center mt-2"},[t.pagination.current_page>1?e("li",{staticClass:"page-item"},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]):t._e(),t._l(t.pagesNumber,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:a==t.pagination.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item"},[t.pagination.current_page<t.pagination.last_page?e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])]):t._e()])],2)])])},i=[],s=(a(560),{props:{pagination:{type:Object,required:!0},offset:{type:Number,default:4}},computed:{pagesNumber:function(){if(!this.pagination.to)return[];var t=this.pagination.current_page-this.offset;t<1&&(t=1);var e=t+2*this.offset;e>=this.pagination.last_page&&(e=this.pagination.last_page);var a=[];for(t=1;t<=e;t++)a.push(t);return a}},methods:{changePage:function(t){this.pagination.current_page=t}}}),r=s,o=a(1001),l=(0,o.Z)(r,n,i,!1,null,null,null),c=l.exports},2441:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var n=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"fw-bold title-page"},[t._v("Danh sách BBBG")]),e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.company_name,expression:"company_name"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Nhập mã số thuế hoặc tên doanh nghiệp để tìm kiếm...."},domProps:{value:t.company_name},on:{change:function(e){return t.search()},input:function(e){e.target.composing||(t.company_name=e.target.value)}}}),e("button",{staticClass:"btn btn-primary-soft",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){return t.search()}}},[e("i",{staticClass:"fa-solid fa-magnifying-glass"}),t._v(" Tìm kiếm ")]),e("router-link",{staticClass:"btn btn-primary ms-2",attrs:{to:{name:"delivery-add"}}},[e("i",{staticClass:"fa-duotone fa-circle-plus"}),t._v(" Tạo mới ")])],1)])]),e("modal-delivery",{ref:"modalDelivery"}),e("table",{staticClass:"table table-striped"},[t._m(0),e("tbody",t._l(t.deliverys,(function(a){return e("tr",{key:a.delivery_id},[e("td",[t._v(t._s(a.delivery_id))]),e("td",[e("router-link",{attrs:{to:{name:"delivery-edit",params:{id:a.delivery_id}}}},[t._v(" "+t._s(a.company_name)+" ")])],1),e("td",[t._v(t._s(a.company_taxcode))]),e("td",[t._v(t._s(a.ten_tb))]),e("td",[t._v(t._s(a.serial_number))]),e("td",[t._v(t._s(t.deliveryType(a.delivery_type)))]),e("td",[t._v(t._s(a.staff_name))]),e("td",[t._v(t._s(t._f("moment")(a.delivery_date,"DD/MM/YYYY")))]),e("td",[t._v(t._s(a.recipient_name))]),e("td",[e("router-link",{staticClass:"btn btn-warning btn-round btn-sm me-1",attrs:{to:{name:"delivery-edit",params:{id:a.delivery_id}}}},[e("i",{staticClass:"fa-regular fa-pen-to-square"})]),e("button",{staticClass:"btn btn-primary-soft btn-sm btn-round",on:{click:function(e){return t.exportDelivery(a,a.delivery_type)}}},[e("i",{staticClass:"fa-thin fa-cloud-arrow-down"})])],1)])})),0)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("pagination",{attrs:{pagination:t.pagination,offset:4},nativeOn:{click:function(e){return t.getDelivery(t.pagination.current_page)}}})],1)])],1)},i=[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"table-dark"},[e("tr",[e("th",[t._v("#")]),e("th",[t._v("Tên công ty")]),e("th",[t._v("Mã số thuế")]),e("th",[t._v("Tên TB")]),e("th",[t._v("Serial Number")]),e("th",[t._v("Loại")]),e("th",[t._v("Nhân viên")]),e("th",[t._v("Thời gian")]),e("th",[t._v("Bên nhận")]),e("th",{attrs:{width:"100"}})])])}],s=(a(8858),a(1318),a(3228),function(){var t=this,e=t._self._c;return e("b-modal",{ref:"modal-add-delivery",attrs:{id:"modal-add-delivery","no-close-on-backdrop":"","no-fade":"",size:"lg","ignore-enforce-focus-selector":"span.select2-container"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(t._s(t.title))]},proxy:!0},{key:"modal-footer",fn:function(){return[e("button",{staticClass:"btn btn-primary-soft",on:{click:t.store}},[e("i",{staticClass:"fa-thin fa-floppy-disk"}),t._v(" Lưu ")]),e("button",{staticClass:"btn btn-secondary",on:{click:t.close}},[e("i",{staticClass:"fa-thin fa-xmark"}),t._v(" Đóng ")])]},proxy:!0}])},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Hợp đồng")]),e("select2",{attrs:{options:t.select.contracts,settings:t.settings},model:{value:t.Delivery.contract_id,callback:function(e){t.$set(t.Delivery,"contract_id",e)},expression:"Delivery.contract_id"}})],1)])}),r=[],o=a(8881),l={components:{Select2:o.Z},data(){return{title:"Thêm mới BBBG",select:{contracts:[]},Delivery:{contract_id:0},settings:{placeholder:"--Hãy chọn dữ liệu--",theme:"bootstrap-5"}}},methods:{show(t={}){this.$bvModal.show("modal-add-delivery"),this.getContracts()},async store(){},close(){this.$bvModal.hide("modal-add-delivery")},async getContracts(){await axios.post("contracts",{page:1,pageSize:500}).then((t=>{this.contracts=t.data.data,this.select.contracts=t.data.data.map((t=>({id:t.contract_id,text:t.company_name+` (${t.details[0].detail_content})`})))}))}}},c=l,d=a(1001),p=(0,d.Z)(c,s,r,!1,null,null,null),u=p.exports,h=a(1859),_=a(438),v={components:{modalDelivery:u,pagination:_.Z},data(){return{deliverys:[],company_name:"",pagination:{total:0,per_page:2,from:1,to:0,current_page:1}}},created(){this.getDelivery(this.pagination.current_page)},methods:{search(){this.getDelivery(_.Z.current_page)},show(t){this.$refs.modalDelivery.show(t)},deliveryType(t){switch(t){case 0:return"BBBG";case 1:return"Thu Hồi";case 2:return"Thay đổi thông tin"}},async exportDelivery(t,e){this.$econtract.showLoading(),await h.Z.post("exportdelivery",{id:t.delivery_id},{responseType:"blob"}).then((a=>{let n="xlsx";e>0&&(n="docx"),console.log(a.data);let i=`${t.serial_number}.${n}`,s=document.createElement("a");s.href=window.URL.createObjectURL(new Blob([a.data])),s.setAttribute("download",i),document.body.appendChild(s),s.click(),this.$econtract.hideLoading()}))},async getDelivery(t){""!=this.company_name&&(t=1),this.$econtract.showLoading(),await h.Z.post("deliverys/search",{page:t,name:this.company_name}).then((t=>{this.deliverys=t.data.data,this.pagination=t.data,this.$econtract.hideLoading()}))}}},g=v,m=(0,d.Z)(g,n,i,!1,null,null,null),f=m.exports}}]);
//# sourceMappingURL=737.f4aa448f.js.map